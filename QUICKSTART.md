# DiagramAI - 快速开始示例

## 🎯 您的配置

根据您提供的配置信息：

```bash
# .env.local
AI_MODEL=deepseek-chat
DEEPSEEK_API_KEY=sk-28d7d669e40b406a91f76cdba0e7c5c5
```

---

## 🚀 5 分钟快速开始

### 1. 安装和启动

```bash
# 克隆项目（如果还没有）
git clone https://github.com/DayuanJiang/next-ai-draw-io
cd next-ai-draw-io

# 安装依赖
npm install

# 创建环境变量文件
# 复制您的配置到 .env.local
echo "AI_MODEL=deepseek-chat" > .env.local
echo "DEEPSEEK_API_KEY=sk-28d7d669e40b406a91f76cdba0e7c5c5" >> .env.local

# 启动开发服务器
npm run dev
```

### 2. 访问应用

打开浏览器访问：**http://localhost:6002**

---

## 💡 实战示例

### 示例 1：创建简单流程图

**提示词**：
```
画一个用户注册流程图，包含：
1. 用户填写表单
2. 验证邮箱
3. 设置密码
4. 注册成功
```

**预期效果**：
- 生成包含 4 个步骤的流程图
- 使用箭头连接各步骤
- 自动添加开始和结束节点

---

### 示例 2：创建微服务架构图

**提示词**：
```
创建一个电商系统的微服务架构图，要求：
- API Gateway 作为入口（橙色）
- 用户服务（蓝色）
- 订单服务（绿色）
- 支付服务（黄色）
- 通知服务（紫色）
- 使用 Redis 缓存
- 使用 MySQL 数据库
- 服务之间通过 RabbitMQ 消息队列通信
```

**预期效果**：
- 清晰的分层架构
- 不同颜色区分不同服务
- 标注通信方式

---

### 示例 3：迭代优化图表

**第 1 轮**：
```
画一个三层架构图：客户端、应用服务器、数据库
```

**第 2 轮**（在第 1 轮基础上修改）：
```
在应用服务器前面添加一个负载均衡器
```

**第 3 轮**：
```
在应用服务器和数据库之间添加 Redis 缓存层
```

**第 4 轮**：
```
使用不同颜色区分不同层次，添加图标
```

---

### 示例 4：创建 UML 类图

**提示词**：
```
创建一个电商系统的 UML 类图，包含以下类：
- User（用户）：id, username, email, password
- Product（商品）：id, name, price, stock
- Order（订单）：id, userId, totalAmount, status
- OrderItem（订单项）：id, orderId, productId, quantity, price

关系：
- User 可以有多个 Order
- Order 包含多个 OrderItem
- OrderItem 关联一个 Product
```

**预期效果**：
- 标准的 UML 类图格式
- 清晰的属性和方法
- 正确的关联关系

---

### 示例 5：上传图片复制

**操作步骤**：
1. 点击聊天输入框的 📎 按钮
2. 上传一张已有的架构图截图
3. 输入提示词：`复制这个图表的结构`

**AI 会**：
- 识别图片中的元素
- 理解布局和连接关系
- 生成相似的可编辑图表

---

## 🎨 提升图表质量的技巧

### 技巧 1：使用具体的描述

❌ **不好**：
```
画一个系统架构
```

✅ **好**：
```
画一个电商系统架构，包含前端（React）、后端（Node.js）、数据库（PostgreSQL）、缓存（Redis）和消息队列（RabbitMQ）
```

---

### 技巧 2：分步构建

```bash
# 步骤 1：建立基础
"创建一个包含客户端、服务器、数据库的三层架构"

# 步骤 2：添加组件
"在服务器层添加负载均衡器和应用服务器集群"

# 步骤 3：添加中间件
"添加 Redis 缓存和消息队列"

# 步骤 4：美化样式
"使用不同颜色区分层次，添加连接线标签"
```

---

### 技巧 3：指定视觉元素

```
- "使用圆角矩形"
- "用蓝色表示核心服务"
- "用虚线表示异步调用"
- "添加阴影效果"
```

---

### 技巧 4：使用云服务商图标

```
"使用 AWS 图标创建架构图，包含：
- EC2 实例
- RDS 数据库
- S3 存储
- CloudFront CDN
- Load Balancer"
```

---

## 🔧 常见问题解决

### 问题 1：启动报错 "API Key not found"

**解决方案**：
```bash
# 确保 .env.local 文件在项目根目录
# 检查环境变量格式正确
cat .env.local

# 重启开发服务器
npm run dev
```

---

### 问题 2：生成的图表不够精确

**解决方案**：
1. **提供更详细的描述**
   - 包含具体的组件名称
   - 说明连接关系
   - 指定颜色和样式

2. **分步构建**
   - 先创建基础结构
   - 再逐步添加细节

3. **使用参考图片**
   - 上传类似风格的图片
   - AI 会学习并模仿

---

### 问题 3：DeepSeek 速度慢

**解决方案**：

DeepSeek-chat 模型速度较快，如果感觉慢，可能是：

1. **网络延迟**
   ```bash
   # 检查 API 连接
   curl -I https://api.deepseek.com
   ```

2. **使用更快的模型**
   ```bash
   # 可选：升级到 deepseek-reasoner（更强但稍慢）
   AI_MODEL=deepseek-reasoner
   ```

---

### 问题 4：如何导出高清图片

**步骤**：
1. 点击图表区域右上角的 ⋮ 菜单
2. 选择 "Export"
3. 选择格式：
   - **PNG**：位图，适合文档
   - **SVG**：矢量图，可无损缩放
   - **XML**：draw.io 原始格式，可再编辑

**推荐**：使用 SVG 格式获得最佳质量

---

## 📊 使用场景示例

### 场景 1：技术文档配图

**需求**：为 API 文档添加时序图

**提示词**：
```
创建一个 RESTful API 调用的时序图：
1. 客户端发送 GET 请求到服务器
2. 服务器验证 Token
3. 服务器查询数据库
4. 数据库返回数据
5. 服务器返回 JSON 响应给客户端
```

---

### 场景 2：项目演示

**需求**：展示系统架构给非技术团队

**提示词**：
```
创建一个简化的系统架构图，要求：
- 使用简单的图标和文字
- 避免技术术语
- 用颜色区分不同模块
- 添加简短说明
```

---

### 场景 3：需求分析

**需求**：画出业务流程

**提示词**：
```
创建一个订单处理流程图，包含：
- 用户下单
- 库存检查（是/否分支）
- 支付处理
- 订单确认
- 发货通知
```

---

### 场景 4：学习笔记

**需求**：整理学习内容

**提示词**：
```
创建一个思维导图，主题是"微服务架构"，包含：
- 核心概念
- 技术栈
- 优势
- 挑战
- 最佳实践
```

---

## 🎓 进阶使用

### 1. 使用快捷键

- `Enter`：发送消息
- `Shift + Enter`：换行
- `Ctrl/Cmd + /`：切换快捷键模式

### 2. 批量操作

```
"将所有蓝色的框改成绿色"
"把所有连接线改成曲线"
"统一字体大小为 12pt"
```

### 3. 模板化

创建常用模板提示词：
```
"根据标准的 AWS 三层架构模板，创建一个..."
"使用标准的 UML 类图格式，画出..."
"按照 C4 模型的 Context 层，展示..."
```

---

## 📝 反馈和改进

如果生成的图表不满意：

1. **明确指出问题**
   ```
   "数据库的位置不对，应该在最下层"
   "连接线太多了，简化一下"
   ```

2. **提供具体修改**
   ```
   "把负载均衡器移到最左边"
   "添加一个说明文字：'HTTP/HTTPS'"
   ```

3. **重新生成**
   ```
   "重新画一个，要求：..."
   ```

---

## 🌟 下一步

1. ✅ 熟悉基础操作
2. ✅ 尝试不同类型的图表
3. ✅ 探索高级功能（历史记录、多会话）
4. ✅ 自定义配置和主题

**开始你的第一个图表吧！** 🚀

---

## 💬 获取帮助

- [完整文档](./SETUP_GUIDE.md)
- [技术架构](./ARCHITECTURE.md)
- [GitHub Issues](https://github.com/DayuanJiang/next-ai-draw-io/issues)
